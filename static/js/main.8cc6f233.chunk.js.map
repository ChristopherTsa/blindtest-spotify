{"version":3,"sources":["logo.svg","loading.svg","Button.js","utils.js","AlbumCover.js","App.js","index.js","App.module.css","Button.module.css"],"names":["Button","props","className","styles","button","onClick","children","getRandomNumber","x","Math","floor","random","AlbumCover","src","track","album","images","url","alt","name","style","width","height","App","useState","tracks","setTracks","songsLoaded","setSongsLoaded","currentTrack","setCurrentTrack","timeoutId","setTimeoutId","chooseNewTrack","tracksList","randomIndex","length","setTimeout","useEffect","fetch","method","headers","Authorization","then","response","json","data","items","app","loading","appLogo","randomIndex1","randomIndex2","propositions","array","counter","index","temp","shuffleArray","appHeader","logo","appTitle","appImages","controls","autoPlay","preview_url","appButtons","map","id","clearTimeout","swal","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"4NAAe,MAA0B,iCCA1B,MAA0B,oC,uCCS1BA,EANA,SAAAC,GAAK,OAClB,wBAAQC,UAAWC,IAAOC,OAAQC,QAASJ,EAAMI,QAAjD,SACGJ,EAAMK,YCJJ,SAASC,EAAgBC,GAC9B,OAAOC,KAAKC,MAAMD,KAAKE,SAAWH,GCFpC,IAMeI,EANI,SAAAX,GACjB,IAAMY,EAAMZ,EAAMa,MAAMC,MAAMC,OAAO,GAAGC,IAClCC,EAAM,mBAAqBjB,EAAMa,MAAMC,MAAMI,KACnD,OAAO,qBAAKN,IAAKA,EAAKO,MAAO,CAAEC,MAAO,IAAKC,OAAQ,KAAOJ,IAAKA,KCqFlDK,EA3EH,WACV,MAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAsCF,oBAAS,GAA/C,mBAAOG,EAAP,KAAoBC,EAApB,KACA,EAAwCJ,mBAAS,MAAjD,mBAAOK,EAAP,KAAqBC,EAArB,KACA,EAAkCN,qBAAlC,mBAAOO,EAAP,KAAkBC,EAAlB,KAEMC,EAAiB,SAAjBA,EAAiBC,GACrB,IAAMC,EAAc5B,EAAgB2B,EAAWE,QAC/CN,EAAgBI,EAAWC,GAAarB,OACxCkB,EAAaK,YAAW,kBAAMJ,EAAeC,KAAa,OAG5DI,qBAAU,WACRC,MAAM,qEAAsE,CAC1EC,OAAQ,MACRC,QAAS,CACPC,cAAe,6LAGhBC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACJpB,EAAUoB,EAAKC,OACfd,EAAea,EAAKC,OACpBnB,GAAe,QAElB,IAWH,IAAKD,EACH,OACE,qBAAKzB,UAAWC,IAAO6C,IAAvB,SACE,qBAAKnC,IAAKoC,EAAS/C,UAAWC,IAAO+C,QAAShC,IAAI,WAKxD,IAAMiC,EAAe5C,EAAgBkB,EAAOW,QACtCgB,EAAe7C,EAAgBkB,EAAOW,QAMtCiB,EF3DD,SAAsBC,GAG3B,IAFA,IAAIC,EAAUD,EAAMlB,OAEbmB,EAAU,GAAG,CAClB,IAAIC,EAAQjD,EAAgBgD,GAExBE,EAAOH,IADXC,GAEAD,EAAMC,GAAWD,EAAME,GACvBF,EAAME,GAASC,EAGjB,OAAOH,EEgDcI,CAAa,CAJnB7B,EACAJ,EAAO0B,GAAcrC,MACrBW,EAAO2B,GAActC,QAIpC,OACE,sBAAKZ,UAAWC,IAAO6C,IAAvB,UACE,yBAAQ9C,UAAWC,IAAOwD,UAA1B,UACE,qBAAK9C,IAAK+C,EAAM1D,UAAWC,IAAO+C,QAAShC,IAAI,SAC/C,oBAAIhB,UAAWC,IAAO0D,SAAtB,2CAEF,sBAAK3D,UAAWC,IAAO2D,UAAvB,UACE,sDAAsBrC,EAAOW,OAA7B,gBACA,uBAAO2B,UAAQ,EAACC,UAAQ,EAACnD,IAAKgB,EAAaoC,iBAE7C,qBAAK/D,UAAWC,IAAO+D,WAAvB,SACGb,EAAac,KAAI,SAAArD,GAAK,OACrB,eAAC,EAAD,CAAQT,QAAS,kBAtCL+D,EAsCuBtD,EAAMsD,QArC3CvC,EAAauC,KAAOA,GACtBC,aAAatC,GACbuC,IAAK,UAAW,iBAAe,WAAW3B,MAAK,kBAAMV,EAAeR,OAEpE6C,IAAK,gBAAiB,wCAAiC,UALvC,IAAAF,GAsCZ,UACE,cAAC,EAAD,CAAYtD,MAAOA,IACnB,8BAAMA,EAAMK,mBC3ExBoD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U,kBCR1BC,EAAOC,QAAU,CAAC,IAAM,iBAAiB,QAAU,qBAAqB,YAAc,yBAAyB,UAAY,uBAAuB,QAAU,uB,kBCA5JD,EAAOC,QAAU,CAAC,OAAS,0B","file":"static/js/main.8cc6f233.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.53a8fc10.svg\";","export default __webpack_public_path__ + \"static/media/loading.6e6379f4.svg\";","import React from \"react\"\nimport styles from \"./Button.module.css\"\n\nconst Button = props => (\n  <button className={styles.button} onClick={props.onClick}>\n    {props.children}\n  </button>\n)\n\nexport default Button\n","/* Return a random number between 0 included and x excluded */\nexport function getRandomNumber(x) {\n  return Math.floor(Math.random() * x)\n}\n\nexport function shuffleArray(array) {\n  let counter = array.length\n\n  while (counter > 0) {\n    let index = getRandomNumber(counter)\n    counter--\n    let temp = array[counter]\n    array[counter] = array[index]\n    array[index] = temp\n  }\n\n  return array\n}\n","const AlbumCover = props => {\n  const src = props.track.album.images[0].url\n  const alt = \"Album cover for \" + props.track.album.name\n  return <img src={src} style={{ width: 400, height: 400 }} alt={alt} />\n}\n\nexport default AlbumCover\n","import { useEffect, useState } from \"react\"\nimport swal from \"sweetalert\"\nimport logo from \"./logo.svg\"\nimport loading from \"./loading.svg\"\nimport styles from \"./App.module.css\"\nimport Button from \"./Button\"\nimport { shuffleArray, getRandomNumber } from \"./utils\"\nimport AlbumCover from \"./AlbumCover\"\n\n// Get token from https://developer.spotify.com/console/get-current-user-saved-tracks/\nconst apiToken =\n  \"BQCySmxSJQBZLtx9qV5RyzxQ7zkAhNHu-YdN8ttfyqO261yppQHf7oTydfgAPWfe-kzpC9ZVAjmiCDUnTQR5VHtoQBTWWiKOUlgo0ItBogxIXmHB0WwXm1hiUyfewY7uvymIs15RykGdzaC819pjKaGYZ1YMnJPW7vQdwpXrS1-MzlHy\"\n\nconst App = () => {\n  const [tracks, setTracks] = useState([])\n  const [songsLoaded, setSongsLoaded] = useState(false)\n  const [currentTrack, setCurrentTrack] = useState(null)\n  const [timeoutId, setTimeoutId] = useState()\n\n  const chooseNewTrack = tracksList => {\n    const randomIndex = getRandomNumber(tracksList.length)\n    setCurrentTrack(tracksList[randomIndex].track)\n    setTimeoutId(setTimeout(() => chooseNewTrack(tracksList), 30000))\n  }\n\n  useEffect(() => {\n    fetch(`https://api.spotify.com/v1/playlists/37i9dQZF1DWWl7MndYYxge/tracks`, {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + apiToken,\n      },\n    })\n      .then(response => response.json())\n      .then(data => {\n        setTracks(data.items)\n        chooseNewTrack(data.items)\n        setSongsLoaded(true)\n      })\n  }, [])\n\n  const checkAnswer = id => {\n    if (currentTrack.id === id) {\n      clearTimeout(timeoutId)\n      swal(\"Bravo !\", \"Tu as gagné\", \"success\").then(() => chooseNewTrack(tracks))\n    } else {\n      swal(\"Essaye encore\", \"Ce n’est pas la bonne réponse\", \"error\")\n    }\n  }\n\n  if (!songsLoaded) {\n    return (\n      <div className={styles.app}>\n        <img src={loading} className={styles.appLogo} alt=\"logo\" />\n      </div>\n    )\n  }\n\n  const randomIndex1 = getRandomNumber(tracks.length)\n  const randomIndex2 = getRandomNumber(tracks.length)\n\n  const track1 = currentTrack\n  const track2 = tracks[randomIndex1].track\n  const track3 = tracks[randomIndex2].track\n\n  const propositions = shuffleArray([track1, track2, track3])\n\n  return (\n    <div className={styles.app}>\n      <header className={styles.appHeader}>\n        <img src={logo} className={styles.appLogo} alt=\"logo\" />\n        <h1 className={styles.appTitle}>Bienvenue sur le Blindtest</h1>\n      </header>\n      <div className={styles.appImages}>\n        <p>Nous avons chargé {tracks.length} chansons.</p>\n        <audio controls autoPlay src={currentTrack.preview_url} />\n      </div>\n      <div className={styles.appButtons}>\n        {propositions.map(track => (\n          <Button onClick={() => checkAnswer(track.id)}>\n            <AlbumCover track={track} />\n            <div>{track.name}</div>\n          </Button>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./global.css\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"appLogo\":\"App_appLogo__1qg7-\",\"appLogoSpin\":\"App_appLogoSpin__P7gwA\",\"appHeader\":\"App_appHeader__28RXF\",\"appLink\":\"App_appLink__2pA8F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1DqCU\"};"],"sourceRoot":""}